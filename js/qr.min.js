var utils$1 = {};

let o$2;const t$e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function(o){if(!o)throw Error('"version" cannot be null or undefined');if(o<1||o>40)throw Error('"version" should be in range from 1 to 40');return 4*o+17},utils$1.getSymbolTotalCodewords=function(o){return t$e[o]},utils$1.getBCHDigit=function(o){let t=0;for(;0!==o;)t++,o>>>=1;return t},utils$1.setToSJISFunction=function(t){if("function"!=typeof t)throw Error('"toSJISFunc" is not a valid function.');o$2=t;},utils$1.isKanjiModeEnabled=function(){return void 0!==o$2},utils$1.toSJIS=function(t){return o$2(t)};

var errorCorrectionLevel = {};

(function (exports) {
	exports.L={bit:1},exports.M={bit:0},exports.Q={bit:3},exports.H={bit:2},exports.isValid=function(r){return r&&void 0!==r.bit&&r.bit>=0&&r.bit<4},exports.from=function(r,t){if(exports.isValid(r))return r;try{return function(r){if("string"!=typeof r)throw Error("Param is not a string");let t=r.toLowerCase();switch(t){case"l":case"low":return exports.L;case"m":case"medium":return exports.M;case"q":case"quartile":return exports.Q;case"h":case"high":return exports.H;default:throw Error("Unknown EC Level: "+r)}}(r)}catch(e){return t}};
} (errorCorrectionLevel));

var bitBuffer = {exports: {}};

function t$d(){this.buffer=[],this.length=0;}t$d.prototype={get:function(t){return (this.buffer[Math.floor(t/8)]>>>7-t%8&1)==1},put:function(t,e){for(let h=0;h<e;h++)this.putBit((t>>>e-h-1&1)==1);},getLengthInBits:function(){return this.length},putBit:function(t){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++;}},bitBuffer.exports=t$d;

var bitMatrix = {exports: {}};

function t$c(t){if(!t||t<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t);}t$c.prototype.set=function(t,e,i,r){let s=t*this.size+e;this.data[s]=i,r&&(this.reservedBit[s]=!0);},t$c.prototype.get=function(t,e){return this.data[t*this.size+e]},t$c.prototype.xor=function(t,e,i){this.data[t*this.size+e]^=i;},t$c.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},bitMatrix.exports=t$c;

var alignmentPattern = {};

(function (exports) {
	const e=utils$1.getSymbolSize;exports.getRowColCoords=function(t){if(1===t)return [];let o=Math.floor(t/7)+2,r=e(t),l=145===r?26:2*Math.ceil((r-13)/(2*o-2)),s=[r-7];for(let n=1;n<o-1;n++)s[n]=s[n-1]-l;return s.push(6),s.reverse()},exports.getPositions=function(e){let t=[],o=exports.getRowColCoords(e),r=o.length;for(let l=0;l<r;l++)for(let s=0;s<r;s++)(0!==l||0!==s)&&(0!==l||s!==r-1)&&(l!==r-1||0!==s)&&t.push([o[l],o[s]]);return t};
} (alignmentPattern));

var finderPattern = {};

const t$b=utils$1.getSymbolSize;finderPattern.getPositions=function(e){let i=t$b(e);return [[0,0],[i-7,0],[0,i-7]]};

var maskPattern = {};

(function (exports) {
	exports.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};function e(t,e,r){switch(t){case exports.Patterns.PATTERN000:return (e+r)%2==0;case exports.Patterns.PATTERN001:return e%2==0;case exports.Patterns.PATTERN010:return r%3==0;case exports.Patterns.PATTERN011:return (e+r)%3==0;case exports.Patterns.PATTERN100:return (Math.floor(e/2)+Math.floor(r/3))%2==0;case exports.Patterns.PATTERN101:return e*r%2+e*r%3==0;case exports.Patterns.PATTERN110:return (e*r%2+e*r%3)%2==0;case exports.Patterns.PATTERN111:return (e*r%3+(e+r)%2)%2==0;default:throw Error("bad maskPattern:"+t)}}exports.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},exports.from=function(t){return exports.isValid(t)?parseInt(t,10):void 0},exports.getPenaltyN1=function(e){let r=e.size,s=0,n=0,o=0,a=null,l=null;for(let N=0;N<r;N++){n=o=0,a=l=null;for(let P=0;P<r;P++){let p=e.get(N,P);p===a?n++:(n>=5&&(s+=t.N1+(n-5)),a=p,n=1),(p=e.get(P,N))===l?o++:(o>=5&&(s+=t.N1+(o-5)),l=p,o=1);}n>=5&&(s+=t.N1+(n-5)),o>=5&&(s+=t.N1+(o-5));}return s},exports.getPenaltyN2=function(e){let r=e.size,s=0;for(let n=0;n<r-1;n++)for(let o=0;o<r-1;o++){let a=e.get(n,o)+e.get(n,o+1)+e.get(n+1,o)+e.get(n+1,o+1);(4===a||0===a)&&s++;}return s*t.N2},exports.getPenaltyN3=function(e){let r=e.size,s=0,n=0,o=0;for(let a=0;a<r;a++){n=o=0;for(let l=0;l<r;l++)n=n<<1&2047|e.get(a,l),l>=10&&(1488===n||93===n)&&s++,o=o<<1&2047|e.get(l,a),l>=10&&(1488===o||93===o)&&s++;}return s*t.N3},exports.getPenaltyN4=function(e){let r=0,s=e.data.length;for(let n=0;n<s;n++)r+=e.data[n];let o=Math.abs(Math.ceil(100*r/s/5)-10);return o*t.N4},exports.applyMask=function(t,r){let s=r.size;for(let n=0;n<s;n++)for(let o=0;o<s;o++)r.isReserved(o,n)||r.xor(o,n,e(t,o,n));},exports.getBestMask=function(t,e){let r=Object.keys(exports.Patterns).length,s=0,n=1/0;for(let o=0;o<r;o++){e(o),exports.applyMask(o,t);let a=exports.getPenaltyN1(t)+exports.getPenaltyN2(t)+exports.getPenaltyN3(t)+exports.getPenaltyN4(t);exports.applyMask(o,t),a<n&&(n=a,s=o);}return s};
} (maskPattern));

var errorCorrectionCode = {};

const e$8=errorCorrectionLevel,r$4=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t$a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function(t,n){switch(n){case e$8.L:return r$4[(t-1)*4+0];case e$8.M:return r$4[(t-1)*4+1];case e$8.Q:return r$4[(t-1)*4+2];case e$8.H:return r$4[(t-1)*4+3];default:return}},errorCorrectionCode.getTotalCodewordsCount=function(r,n){switch(n){case e$8.L:return t$a[(r-1)*4+0];case e$8.M:return t$a[(r-1)*4+1];case e$8.Q:return t$a[(r-1)*4+2];case e$8.H:return t$a[(r-1)*4+3];default:return}};

var reedSolomonEncoder = {exports: {}};

var polynomial = {};

var galoisField = {};

const r$3=new Uint8Array(512),t$9=new Uint8Array(256);!function(){let n=1;for(let o=0;o<255;o++)r$3[o]=n,t$9[n]=o,256&(n<<=1)&&(n^=285);for(let e=255;e<512;e++)r$3[e]=r$3[e-255];}(),galoisField.log=function(r){if(r<1)throw Error("log("+r+")");return t$9[r]},galoisField.exp=function(t){return r$3[t]},galoisField.mul=function(n,o){return 0===n||0===o?0:r$3[t$9[n]+t$9[o]]};

(function (exports) {
	const e=galoisField;exports.mul=function(t,n){let r=new Uint8Array(t.length+n.length-1);for(let l=0;l<t.length;l++)for(let o=0;o<n.length;o++)r[l+o]^=e.mul(t[l],n[o]);return r},exports.mod=function(t,n){let r=new Uint8Array(t);for(;r.length-n.length>=0;){let l=r[0];for(let o=0;o<n.length;o++)r[o]^=e.mul(n[o],l);let i=0;for(;i<r.length&&0===r[i];)i++;r=r.slice(i);}return r},exports.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let r=0;r<t;r++)n=exports.mul(n,new Uint8Array([1,e.exp(r)]));return n};
} (polynomial));

const e$7=polynomial;function t$8(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree);}t$8.prototype.initialize=function(t){this.degree=t,this.genPoly=e$7.generateECPolynomial(this.degree);},t$8.prototype.encode=function(t){if(!this.genPoly)throw Error("Encoder not initialized");let i=new Uint8Array(t.length+this.degree);i.set(t);let n=e$7.mod(i,this.genPoly),r=this.degree-n.length;if(r>0){let o=new Uint8Array(this.degree);return o.set(n,r),o}return n},reedSolomonEncoder.exports=t$8;

var version = {};

var mode = {};

var versionCheck = {};

versionCheck.isValid=function(i){return !isNaN(i)&&i>=1&&i<=40};

var regex = {};

const u$1="[0-9]+";let e$6="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e$6=e$6.replace(/u/g,"\\u");const t$7="(?:(?![A-Z0-9 $%*+\\-./:]|"+e$6+")(?:.|[\r\n]))+";regex.KANJI=RegExp(e$6,"g"),regex.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),regex.BYTE=RegExp(t$7,"g"),regex.NUMERIC=RegExp(u$1,"g"),regex.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");const p=RegExp("^"+e$6+"$"),r$2=RegExp("^"+u$1+"$"),s$1=RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function(u){return p.test(u)},regex.testNumeric=function(u){return r$2.test(u)},regex.testAlphanumeric=function(u){return s$1.test(u)};

(function (exports) {
	const r=versionCheck,t=regex;exports.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},exports.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},exports.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},exports.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},exports.MIXED={bit:-1},exports.getCharCountIndicator=function(t,e){if(!t.ccBits)throw Error("Invalid mode: "+t);if(!r.isValid(e))throw Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},exports.getBestModeForData=function(r){return t.testNumeric(r)?exports.NUMERIC:t.testAlphanumeric(r)?exports.ALPHANUMERIC:t.testKanji(r)?exports.KANJI:exports.BYTE},exports.toString=function(r){if(r&&r.id)return r.id;throw Error("Invalid mode")},exports.isValid=function(r){return r&&r.bit&&r.ccBits},exports.from=function(r,t){if(exports.isValid(r))return r;try{return function(r){if("string"!=typeof r)throw Error("Param is not a string");let t=r.toLowerCase();switch(t){case"numeric":return exports.NUMERIC;case"alphanumeric":return exports.ALPHANUMERIC;case"kanji":return exports.KANJI;case"byte":return exports.BYTE;default:throw Error("Unknown mode: "+r)}}(r)}catch(e){return t}};
} (mode));

(function (exports) {
	const e=utils$1,r=errorCorrectionCode,t=errorCorrectionLevel,o=mode,i=versionCheck,n=e.getBCHDigit(7973);function u(e,r){return o.getCharCountIndicator(e,r)+4}function a(e,r){let t=0;return e.forEach(function(e){let o=u(e.mode,r);t+=o+e.getBitsLength();}),t}exports.from=function(e,r){return i.isValid(e)?parseInt(e,10):r},exports.getCapacity=function(t,n,a){if(!i.isValid(t))throw Error("Invalid QR Code version");void 0===a&&(a=o.BYTE);let l=e.getSymbolTotalCodewords(t),c=r.getTotalCodewordsCount(t,n),f=(l-c)*8;if(a===o.MIXED)return f;let s=f-u(a,t);switch(a){case o.NUMERIC:return Math.floor(s/10*3);case o.ALPHANUMERIC:return Math.floor(s/11*2);case o.KANJI:return Math.floor(s/13);case o.BYTE:default:return Math.floor(s/8)}},exports.getBestVersionForData=function(e,r){let i;let n=t.from(r,t.M);if(Array.isArray(e)){if(e.length>1)return function(e,r){for(let t=1;t<=40;t++){let i=a(e,t);if(i<=exports.getCapacity(t,r,o.MIXED))return t}}(e,n);if(0===e.length)return 1;i=e[0];}else i=e;return function(e,r,t){for(let o=1;o<=40;o++)if(r<=exports.getCapacity(o,t,e))return o}(i.mode,i.getLength(),n)},exports.getEncodedBits=function(r){if(!i.isValid(r)||r<7)throw Error("Invalid QR Code version");let t=r<<12;for(;e.getBCHDigit(t)-n>=0;)t^=7973<<e.getBCHDigit(t)-n;return r<<12|t};
} (version));

var formatInfo = {};

const t$6=utils$1,i$1=t$6.getBCHDigit(1335);formatInfo.getEncodedBits=function(e,g){let r=e.bit<<3|g,n=r<<10;for(;t$6.getBCHDigit(n)-i$1>=0;)n^=1335<<t$6.getBCHDigit(n)-i$1;return (r<<10|n)^21522};

var segments = {};

var numericData = {exports: {}};

const t$5=mode;function e$5(e){this.mode=t$5.NUMERIC,this.data=e.toString();}e$5.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},e$5.prototype.getLength=function(){return this.data.length},e$5.prototype.getBitsLength=function(){return e$5.getBitsLength(this.data.length)},e$5.prototype.write=function(t){let e,n,o;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),o=parseInt(n,10),t.put(o,10);let r=this.data.length-e;r>0&&(n=this.data.substr(e),o=parseInt(n,10),t.put(o,3*r+1));},numericData.exports=e$5;

var alphanumericData = {exports: {}};

const t$4=mode,e$4=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n$2(e){this.mode=t$4.ALPHANUMERIC,this.data=e;}n$2.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},n$2.prototype.getLength=function(){return this.data.length},n$2.prototype.getBitsLength=function(){return n$2.getBitsLength(this.data.length)},n$2.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let i=45*e$4.indexOf(this.data[n]);i+=e$4.indexOf(this.data[n+1]),t.put(i,11);}this.data.length%2&&t.put(e$4.indexOf(this.data[n]),6);},alphanumericData.exports=n$2;

var byteData = {exports: {}};

var encodeUtf8=function(u){for(var h=[],n=u.length,s=0;s<n;s++){var e=u.charCodeAt(s);if(e>=55296&&e<=56319&&n>s+1){var r=u.charCodeAt(s+1);r>=56320&&r<=57343&&(e=(e-55296)*1024+r-56320+65536,s+=1);}if(e<128){h.push(e);continue}if(e<2048){h.push(e>>6|192),h.push(63&e|128);continue}if(e<55296||e>=57344&&e<65536){h.push(e>>12|224),h.push(e>>6&63|128),h.push(63&e|128);continue}if(e>=65536&&e<=1114111){h.push(e>>18|240),h.push(e>>12&63|128),h.push(e>>6&63|128),h.push(63&e|128);continue}h.push(239,191,189);}return new Uint8Array(h).buffer};

const t$3=encodeUtf8,e$3=mode;function n$1(n){this.mode=e$3.BYTE,"string"==typeof n&&(n=t$3(n)),this.data=new Uint8Array(n);}n$1.getBitsLength=function(t){return 8*t},n$1.prototype.getLength=function(){return this.data.length},n$1.prototype.getBitsLength=function(){return n$1.getBitsLength(this.data.length)},n$1.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8);},byteData.exports=n$1;

var kanjiData = {exports: {}};

const t$2=mode,e$2=utils$1;function r$1(e){this.mode=t$2.KANJI,this.data=e;}r$1.getBitsLength=function(t){return 13*t},r$1.prototype.getLength=function(){return this.data.length},r$1.prototype.getBitsLength=function(){return r$1.getBitsLength(this.data.length)},r$1.prototype.write=function(t){let r;for(r=0;r<this.data.length;r++){let i=e$2.toSJIS(this.data[r]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw Error("Invalid SJIS character: "+this.data[r]+"\nMake sure your charset is UTF-8");i=(i>>>8&255)*192+(255&i),t.put(i,13);}},kanjiData.exports=r$1;

var dijkstra = {exports: {}};

(function (module) {
var r={single_source_shortest_paths:function(t,e,o){var s,u,n,i,h,f,p,_={},d={};d[e]=0;var l=r.PriorityQueue.make();for(l.push(e,0);!l.empty();)for(n in u=(s=l.pop()).value,i=s.cost,h=t[u]||{})h.hasOwnProperty(n)&&(f=i+h[n],p=d[n],(void 0===d[n]||p>f)&&(d[n]=f,l.push(n,f),_[n]=u));if(void 0!==o&&void 0===d[o])throw Error(["Could not find a path from ",e," to ",o,"."].join(""));return _},extract_shortest_path_from_predecessor_list:function(r,t){for(var e=[],o=t;o;)e.push(o),r[o],o=r[o];return e.reverse(),e},find_path:function(t,e,o){var s=r.single_source_shortest_paths(t,e,o);return r.extract_shortest_path_from_predecessor_list(s,o)},PriorityQueue:{make:function(t){var e,o=r.PriorityQueue,s={};for(e in t=t||{},o)o.hasOwnProperty(e)&&(s[e]=o[e]);return s.queue=[],s.sorter=t.sorter||o.default_sorter,s},default_sorter:function(r,t){return r.cost-t.cost},push:function(r,t){this.queue.push({value:r,cost:t}),this.queue.sort(this.sorter);},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};(module.exports=r);
} (dijkstra));

(function (exports) {
	const e=mode,t=numericData.exports,n=alphanumericData.exports,r=byteData.exports,a=kanjiData.exports,o=regex,d=utils$1,u=dijkstra.exports;function l(e){return unescape(encodeURIComponent(e)).length}function i(e,t,n){let r;let a=[];for(;null!==(r=e.exec(n));)a.push({data:r[0],index:r.index,mode:t,length:r[0].length});return a}function s(t){let n,r;let a=i(o.NUMERIC,e.NUMERIC,t),u=i(o.ALPHANUMERIC,e.ALPHANUMERIC,t);d.isKanjiModeEnabled()?(n=i(o.BYTE,e.BYTE,t),r=i(o.KANJI,e.KANJI,t)):(n=i(o.BYTE_KANJI,e.BYTE,t),r=[]);let l=a.concat(u,n,r);return l.sort(function(e,t){return e.index-t.index}).map(function(e){return {data:e.data,mode:e.mode,length:e.length}})}function h(o,d){switch(d){case e.NUMERIC:return t.getBitsLength(o);case e.ALPHANUMERIC:return n.getBitsLength(o);case e.KANJI:return a.getBitsLength(o);case e.BYTE:return r.getBitsLength(o)}}function g(o,u){let l;let i=e.getBestModeForData(o);if((l=e.from(u,i))!==e.BYTE&&l.bit<i.bit)throw Error('"'+o+'" cannot be encoded with mode '+e.toString(l)+".\n Suggested mode is: "+e.toString(i));switch(l!==e.KANJI||d.isKanjiModeEnabled()||(l=e.BYTE),l){case e.NUMERIC:return new t(o);case e.ALPHANUMERIC:return new n(o);case e.KANJI:return new a(o);case e.BYTE:return new r(o)}}exports.fromArray=function(e){return e.reduce(function(e,t){return "string"==typeof t?e.push(g(t,null)):t.data&&e.push(g(t.data,t.mode)),e},[])},exports.fromString=function(t,n){let a=s(t,d.isKanjiModeEnabled()),o=function(t){let n=[];for(let r=0;r<t.length;r++){let a=t[r];switch(a.mode){case e.NUMERIC:n.push([a,{data:a.data,mode:e.ALPHANUMERIC,length:a.length},{data:a.data,mode:e.BYTE,length:a.length}]);break;case e.ALPHANUMERIC:n.push([a,{data:a.data,mode:e.BYTE,length:a.length}]);break;case e.KANJI:n.push([a,{data:a.data,mode:e.BYTE,length:l(a.data)}]);break;case e.BYTE:n.push([{data:a.data,mode:e.BYTE,length:l(a.data)}]);}}return n}(a),i=function(t,n){let r={},a={start:{}},o=["start"];for(let d=0;d<t.length;d++){let u=t[d],l=[];for(let i=0;i<u.length;i++){let s=u[i],g=""+d+i;l.push(g),r[g]={node:s,lastCount:0},a[g]={};for(let c=0;c<o.length;c++){let m=o[c];r[m]&&r[m].node.mode===s.mode?(a[m][g]=h(r[m].lastCount+s.length,s.mode)-h(r[m].lastCount,s.mode),r[m].lastCount+=s.length):(r[m]&&(r[m].lastCount=s.length),a[m][g]=h(s.length,s.mode)+4+e.getCharCountIndicator(s.mode,n));}}o=l;}for(let f=0;f<o.length;f++)a[o[f]].end=0;return {map:a,table:r}}(o,n),g=u.find_path(i.map,"start","end"),c=[];for(let m=1;m<g.length-1;m++)c.push(i.table[g[m]].node);return exports.fromArray(c.reduce(function(e,t){let n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[]))},exports.rawSplit=function(e){return exports.fromArray(s(e,d.isKanjiModeEnabled()))};
} (segments));

const e$1=utils$1,t$1=errorCorrectionLevel,r=bitBuffer.exports,o$1=bitMatrix.exports,n=alignmentPattern,i=finderPattern,s=maskPattern,l=errorCorrectionCode,f=reedSolomonEncoder.exports,a=version,u=formatInfo,c=mode,d=segments;function g(e,t,r){let o,n;let i=e.size,s=u.getEncodedBits(t,r);for(o=0;o<15;o++)n=(s>>o&1)==1,o<6?e.set(o,8,n,!0):o<8?e.set(o+1,8,n,!0):e.set(i-15+o,8,n,!0),o<8?e.set(8,i-o-1,n,!0):o<9?e.set(8,15-o-1+1,n,!0):e.set(8,15-o-1,n,!0);e.set(i-8,8,1,!0);}var create = function(u,m){let h,w;if(void 0===u||""===u)throw Error("No input text");let p=t$1.M;return void 0!==m&&(p=t$1.from(m.errorCorrectionLevel,t$1.M),h=a.from(m.version),w=s.from(m.maskPattern),m.toSJISFunc&&e$1.setToSJISFunction(m.toSJISFunc)),function(t,u,m,h){let w;if(Array.isArray(t))w=d.fromArray(t);else if("string"==typeof t){let p=u;if(!p){let q=d.rawSplit(t);p=a.getBestVersionForData(q,m);}w=d.fromString(t,p||40);}else throw Error("Invalid data");let C=a.getBestVersionForData(w,m);if(!C)throw Error("The amount of data is too big to be stored in a QR Code");if(u){if(u<C)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+C+".\n")}else u=C;let b=function(t,o,n){let i=new r;n.forEach(function(e){i.put(e.mode.bit,4),i.put(e.getLength(),c.getCharCountIndicator(e.mode,t)),e.write(i);});let s=e$1.getSymbolTotalCodewords(t),a=l.getTotalCodewordsCount(t,o),u=(s-a)*8;for(i.getLengthInBits()+4<=u&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);let d=(u-i.getLengthInBits())/8;for(let g=0;g<d;g++)i.put(g%2?17:236,8);return function(t,r,o){let n,i;let s=e$1.getSymbolTotalCodewords(r),a=l.getTotalCodewordsCount(r,o),u=l.getBlocksCount(r,o),c=u-s%u,d=Math.floor((s-a)/u),g=d+1,m=Math.floor(s/u)-d,h=new f(m),w=0,p=Array(u),q=Array(u),C=0,b=new Uint8Array(t.buffer);for(let v=0;v<u;v++){let y=v<c?d:g;p[v]=b.slice(w,w+y),q[v]=h.encode(p[v]),w+=y,C=Math.max(C,y);}let S=new Uint8Array(s),B=0;for(n=0;n<C;n++)for(i=0;i<u;i++)n<p[i].length&&(S[B++]=p[i][n]);for(n=0;n<m;n++)for(i=0;i<u;i++)S[B++]=q[i][n];return S}(i,t,o)}(u,m,w),v=e$1.getSymbolSize(u),y=new o$1(v);return function(e,t){let r=e.size,o=i.getPositions(t);for(let n=0;n<o.length;n++){let s=o[n][0],l=o[n][1];for(let f=-1;f<=7;f++)if(!(s+f<=-1)&&!(r<=s+f))for(let a=-1;a<=7;a++)l+a<=-1||r<=l+a||(f>=0&&f<=6&&(0===a||6===a)||a>=0&&a<=6&&(0===f||6===f)||f>=2&&f<=4&&a>=2&&a<=4?e.set(s+f,l+a,!0,!0):e.set(s+f,l+a,!1,!0));}}(y,u),function(e){let t=e.size;for(let r=8;r<t-8;r++){let o=r%2==0;e.set(r,6,o,!0),e.set(6,r,o,!0);}}(y),function(e,t){let r=n.getPositions(t);for(let o=0;o<r.length;o++){let i=r[o][0],s=r[o][1];for(let l=-2;l<=2;l++)for(let f=-2;f<=2;f++)-2===l||2===l||-2===f||2===f||0===l&&0===f?e.set(i+l,s+f,!0,!0):e.set(i+l,s+f,!1,!0);}}(y,u),g(y,m,0),u>=7&&function(e,t){let r,o,n;let i=e.size,s=a.getEncodedBits(t);for(let l=0;l<18;l++)r=Math.floor(l/3),o=l%3+i-8-3,n=(s>>l&1)==1,e.set(r,o,n,!0),e.set(o,r,n,!0);}(y,u),function(e,t){let r=e.size,o=-1,n=r-1,i=7,s=0;for(let l=r-1;l>0;l-=2)for(6===l&&l--;;){for(let f=0;f<2;f++)if(!e.isReserved(n,l-f)){let a=!1;s<t.length&&(a=(t[s]>>>i&1)==1),e.set(n,l-f,a),-1==--i&&(s++,i=7);}if((n+=o)<0||r<=n){n-=o,o=-o;break}}}(y,b),isNaN(h)&&(h=s.getBestMask(y,g.bind(null,y,m))),s.applyMask(h,y),g(y,m,h),{modules:y,version:u,errorCorrectionLevel:m,maskPattern:h,segments:w}}(u,h,p,w)};

var utils = {};

(function (exports) {
	function t(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||5===r.length||r.length>8)throw Error("Invalid hex color: "+t);(3===r.length||4===r.length)&&(r=Array.prototype.concat.apply([],r.map(function(t){return [t,t]}))),6===r.length&&r.push("F","F");let e=parseInt(r.join(""),16);return {r:e>>24&255,g:e>>16&255,b:e>>8&255,a:255&e,hex:"#"+r.slice(0,6).join("")}}exports.getOptions=function(r){r||(r={}),r.color||(r.color={});let e=void 0===r.margin||null===r.margin||r.margin<0?4:r.margin,o=r.width&&r.width>=21?r.width:void 0,l=r.scale||4;return {width:o,scale:o?4:l,margin:e,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},exports.getScale=function(t,r){return r.width&&r.width>=t+2*r.margin?r.width/(t+2*r.margin):r.scale},exports.getImageWidth=function(t,r){let e=exports.getScale(t,r);return Math.floor((t+2*r.margin)*e)},exports.qrToImageData=function(t,r,e){let o=r.modules.size,l=r.modules.data,n=exports.getScale(o,e),i=Math.floor((o+2*e.margin)*n),a=e.margin*n,g=[e.color.light,e.color.dark];for(let h=0;h<i;h++)for(let f=0;f<i;f++){let c=(h*i+f)*4,s=e.color.light;if(h>=a&&f>=a&&h<i-a&&f<i-a){let d=Math.floor((h-a)/n),p=Math.floor((f-a)/n);s=g[l[d*o+p]?1:0];}t[c++]=s.r,t[c++]=s.g,t[c++]=s.b,t[c]=s.a;}};
} (utils));

const t=utils;function e(t,e){let o=t.a/255,r=e+'="'+t.hex+'"';return o<1?r+" "+e+'-opacity="'+o.toFixed(2).slice(1)+'"':r}function o(t,e,o){let r=t+e;return void 0!==o&&(r+=" "+o),r}var render = function(r,i,n){let l=t.getOptions(i),h=r.modules.size,s=r.modules.data,d=h+2*l.margin,u=l.color.light.a?"<path "+e(l.color.light,"fill")+' d="M0 0h'+d+"v"+d+'H0z"/>':"",a="<path "+e(l.color.dark,"stroke")+' d="'+function(t,e,r){let i="",n=0,l=!1,h=0;for(let s=0;s<t.length;s++){let d=Math.floor(s%e),u=Math.floor(s/e);d||l||(l=!0),t[s]?(h++,s>0&&d>0&&t[s-1]||(i+=l?o("M",d+r,.5+u+r):o("m",n,0),n=0,l=!1),d+1<e&&t[s+1]||(i+=o("h",h),h=0)):n++;}return i}(s,h,l.margin)+'"/>',g=l.width?'width="'+l.width+'" height="'+l.width+'" ':"",c='<svg xmlns="http://www.w3.org/2000/svg" '+g+('viewBox="0 0 '+d+" ")+d+'" shape-rendering="crispEdges">'+u+a+"</svg>\n";return "function"==typeof n&&n(null,c),c};

function renderToSvg(o){let t=create(o);return render(t)}

export { renderToSvg };
